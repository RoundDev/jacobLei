<div class="container bg-1 padding-container">

  <form [formGroup]="infoPaymentForm" id="nonce-form" method="POST">
    <input type="hidden" name="action" value="/api/sendpayment"/>
  <div class="row row-padding padding-content md-padding-content lg-padding-content">
    <div class="col-12"></div>
    <div class="panel panel-info">
      <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6  panel-heading">
        <div class= "col-xs-12 col-sm-12 col-md-6 col-lg-6"><span><i class="glyphicon glyphicon-lock"></i></span> Secure Payment
        </div>
        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 pull-right"><img class="pull-right cards-img" src="assets/img/credit-cards.png">
        </div>
      </div>
<!--TODO: Add formGroupName="user" to rest of fields-->
      <div class="panel-body panel-box">
        <div class="form-group" >
          <div class="col-sm-12 col-md-12 col-lg-12">
            <strong>Name on Card</strong>
          </div>
          <div class="col-sm-12 col-md-12">
            <input id="payeeName" formControlName="payeeName" autocomplete="off" type="text" (input)="checkInputError()" class="form-control" name="payeeName" required/>
            <span class="alert-warning small" *ngIf="nameError !== null">{{nameError}}</span>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-12 col-md-12 col-lg-12">
            <strong>Phone Number</strong>
          </div>
          <div class="col-sm-12 col-md-12 col-lg-12">
            <input id="phoneNumber" formControlName="phoneNumber" autocomplete="off" (input)="checkInputError()" type="number" class="form-control" name="phoneNumber" required/>
            <span class="alert-warning small" *ngIf="phoneNumberError !== null">{{phoneNumberError}}</span>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-12 col-md-12 col-lg-12">
            <strong>Email Address</strong>
          </div>
          <div class="col-sm-12 col-md-12 col-lg-12">
            <input id="email" formControlName="email" autocomplete="off" (input)="checkInputError()" type="text" class="form-control" name="email" required/>
            <span class="alert-warning small" *ngIf="emailError !== null">{{emailError}}</span>
          </div>
        </div>
        <!--Beginning of Square-->
        <div id="sq-ccbox">
          <div class="form-group">
            <div class="col-sm-12 col-md-12 col-lg-12">
            <label for="sq-card-number">Card Number</label>
              <input id="sq-card-number" autocomplete="off" type="number" class="form-control" name="car_number" />
            </div>
          </div>
          <div class="form-group">
            <div class="col-xss-12 col-sm-12 col-md-12 col-lg-12">
            <label for="sq-expiration-date">Expiration Date</label>
              <input id="sq-expiration-date" autocomplete="off" type="number" class="form-control"/>
            </div>
          </div>
          <div class="form-group">
            <div class='col-xs-12 col-md-6 col-lg-6'>
            <label for="sq-cvv">Card CVV</label>
              <input id="sq-cvv" type="number" autocomplete="off" class='form-control'/>
              <!--<span class="afix">3 Digit Security Code on Back or 4 Digits on Front of AmEx</span>-->
            </div>
          </div>
          <div class="form-group">
            <div class='col-xs-12 col-md-6 col-lg-6'>
            <label for="sq-postal-code">Card Zip Code</label>
              <input id="sq-postal-code" type="number" autocomplete="off" class='form-control'/>
            </div>
          </div>
          <div id="error"></div>
        </div>
        <!--End of Square payment-->

        <div class="form-group">
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 info-row">
            <strong>This payment is regarding rental property</strong>
          </div>
          <div class="col-sm-12 col-md-12 col-lg-12">
            <input id="propertyName" formControlName="propertyName" (input)="checkInputError()" type="text" class="form-control" name="propertyName" required/>
            <span class="alert-warning small" *ngIf="propertyNameError !== null">{{propertyNameError}}</span>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-12 col-md-12 col-lg-12">
            <strong>Your Comment</strong>
          </div>
          <div class="col-sm-12 col-md-12 col-lg-12">
            <input id="propertyComment" formControlName="propertyComment" (input)="checkInputError()" type="text" class="form-control" name="propertyComment" required/>
            <span class="alert-warning small" *ngIf="propertyCommentError !== null">{{propertyCommentError}}</span>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-12 col-md-12 col-lg-12">
            <strong>If you are paying for a different Named Rental Applicant, Please enter their name</strong>
          </div>
          <div class="col-sm-12 col-md-12 col-lg-12">
            <input id="differentName" autocomplete="off" formControlName="differentName" (input)="checkInputError()" type="text" class="form-control" name="differentName"  required/>
            <span class="alert-warning small" *ngIf="differentNameError !== null">{{differentNameError}}</span>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-12 col-md-12 col-lg-12">
            <strong>Amount You Are Paying</strong>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-6">
            <span class="currency-input">$</span><input id="amountToPay" autocomplete="off" type="number" min="1" max="9999" class="form-control" name="amountToPay"  value="0" />
            <!--<span class="alert-warning small" *ngIf="amountToPayError !== null">{{amountToPayError}}</span>-->
            <!--<input id="amountToPay" type="number" #amountToPay (keyup)="this.calculatePayment(amountToPay)" class="form-control" name="amountToPay"  value="0"  />-->
            <span class="afix">***3.75% fee will be added to the amount (see below)</span>
          </div>
        </div>
        <div class="form-group">
          <div class="col-xs-12 col-md-12 col-sm-12 col-xs-12 col-lg-12 pull-right btn-row">
            <button id="sq-creditcard"  class="btn btn-primary btn-lg btn-submit-fix pull-right" [disabled]="!infoPaymentForm.valid" data-toggle="modal" data-target="#modalConformation" (click)="conformationModal()" >Pay</button>
            <input type="hidden" id="card-nonce" name="nonce">
            <!--(click)="requestCardNonce($event)"-->
          </div>
          <div class="col-xs-12 col-md-6 col-sm-6 col-xs-6 col-lg-6 pull-right">
          </div>
        </div>
        <div class="form-group">
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <p class="alert alert-info info-p">
              ***3.75% fee added as a transaction processing fee charged by the merchant account provider***
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
  </form>
</div>
<!--Modal-->
<div class="modal fade" id="modalConformation">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3 *ngIf="conformationShow" class="modal-title">{{modalHeader}}</h3>
        <h3 *ngIf="paymnetSuccess" class="modal-title">{{modalHeader}}</h3>
        <!--<h3 *ngIf="paymnetSuccess === false" class="modal-title">{{modalHeader}}</h3>-->
      </div>
      <div class="modal-body">
        <h5 *ngIf="conformationShow">${{modalAmountToPay}}</h5>
        <h5 *ngIf="paymnetSuccess">{{modalConformation}}</h5>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-default" id="payButton"  data-target="#modal" (click)="requestCardNonce($event)">Pay</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
